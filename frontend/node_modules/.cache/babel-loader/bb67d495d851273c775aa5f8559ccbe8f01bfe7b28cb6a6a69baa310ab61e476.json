{"ast":null,"code":"import _objectSpread from\"/home/roddy/Desktop/mynotes/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/roddy/Desktop/mynotes/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/roddy/Desktop/mynotes/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/roddy/Desktop/mynotes/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useParams}from\"react-router-dom\";// import notes from '../assets/data'\nimport{Link}from'react-router-dom';import{ReactComponent as ArrowLeft}from'../assets/arrow-left.svg';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function NotesListPage(){// let note = notes.find(note => note.id === Number({id}.id))\n// console.log(`${id}`);\nvar _useParams=useParams(),id=_useParams.id;var noteId={id:id}.id;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),note=_useState2[0],setNote=_useState2[1];useEffect(function(){getNote();},[noteId]);var getNote=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(noteId==='new')){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return fetch(\"http://127.0.0.1:8000/notes/\".concat(noteId));case 4:response=_context.sent;_context.next=7;return response.json();case 7:data=_context.sent;setNote(data);case 9:case\"end\":return _context.stop();}},_callee);}));return function getNote(){return _ref.apply(this,arguments);};}();var createNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"http://127.0.0.1:8000/notes/create/\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(note)});case 2:case\"end\":return _context2.stop();}},_callee2);}));return function createNote(){return _ref2.apply(this,arguments);};}();var updateNote=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"http://127.0.0.1:8000/notes/\".concat(noteId,\"/update/\"),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(note)});case 2:case\"end\":return _context3.stop();}},_callee3);}));return function updateNote(){return _ref3.apply(this,arguments);};}();var deleteNote=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return fetch(\"http://127.0.0.1:8000/notes/\".concat(noteId,\"/delete/\"),{method:'DELETE',headers:{'Content-Type':'application/json'},body:JSON.stringify({note:note})});case 2:case\"end\":return _context4.stop();}},_callee4);}));return function deleteNote(){return _ref4.apply(this,arguments);};}();var handleSubmit=function handleSubmit(){if(noteId!='new'&&!note.body){deleteNote();}else if(noteId!=='new'){updateNote();}else if(noteId==='new'&&note!==null){createNote();}};return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(ArrowLeft,{onClick:handleSubmit})})}),noteId!='new'?/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"button\",{onClick:deleteNote,children:\"Delete\"})}):/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Done\"})})]}),/*#__PURE__*/_jsx(\"textarea\",{onChange:function onChange(e){setNote(_objectSpread(_objectSpread({},note),{},{'body':e.target.value}));},value:note===null||note===void 0?void 0:note.body})]});}","map":{"version":3,"names":["React","useState","useEffect","useParams","Link","ReactComponent","ArrowLeft","jsx","_jsx","jsxs","_jsxs","NotesListPage","_useParams","id","noteId","_useState","_useState2","_slicedToArray","note","setNote","getNote","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","abrupt","fetch","concat","sent","json","stop","apply","arguments","createNote","_ref2","_callee2","_callee2$","_context2","method","headers","body","JSON","stringify","updateNote","_ref3","_callee3","_callee3$","_context3","deleteNote","_ref4","_callee4","_callee4$","_context4","handleSubmit","className","children","to","onClick","onChange","e","_objectSpread","target","value"],"sources":["/home/roddy/Desktop/mynotes/frontend/src/pages/NotePage.js"],"sourcesContent":["import React, {useState, useEffect} from 'react'\nimport { useParams } from \"react-router-dom\"\n// import notes from '../assets/data'\nimport { Link } from 'react-router-dom'\nimport { ReactComponent as ArrowLeft } from '../assets/arrow-left.svg'\n\nexport default function NotesListPage() {\n    // let note = notes.find(note => note.id === Number({id}.id))\n    // console.log(`${id}`);\n    let { id } = useParams();\n    let noteId = {id}.id\n    let [note, setNote] = useState(null)\n\n    useEffect(() => {\n        getNote()   \n    }, [noteId])\n\n    let getNote = async() => {\n        if (noteId === 'new') return\n        let response = await fetch(`http://127.0.0.1:8000/notes/${noteId}`)\n        let data = await response.json()\n        setNote(data)\n    }\n    \n\n    let createNote = async () => {\n        await fetch(`http://127.0.0.1:8000/notes/create/`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(note)\n    })\n    }\n\n    let updateNote = async () => {\n        await fetch(`http://127.0.0.1:8000/notes/${noteId}/update/`, {\n            method: 'PUT',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(note)\n    })\n}\n\n    let deleteNote = async () => {\n        await fetch(`http://127.0.0.1:8000/notes/${noteId}/delete/`, {\n            method: 'DELETE',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({note})\n    })\n    }\n\n    let handleSubmit = () => {\n\n        if(noteId != 'new' && !note.body) {\n            deleteNote()\n        } else if (noteId !== 'new') {\n            updateNote()\n        } else if (noteId === 'new' && note !== null) {\n            createNote()\n        }\n\n    }\n\n    return(\n        <div className=\"note\">\n            <div className=\"note-header\">\n                <h3>\n                    <Link to=\"/\">\n                        <ArrowLeft onClick={handleSubmit} />\n                    </Link>\n                </h3>\n\n                {noteId != 'new' ? (\n                    <Link to={\"/\"}>\n                    <button onClick={deleteNote}>Delete</button>\n                    </Link>\n                ) : (\n                    <Link to={\"/\"}>\n                    <button onClick={handleSubmit}>Done</button>\n                    </Link>\n                )}\n                \n            </div>\n            <textarea onChange={(e) => {setNote({...note, 'body': e.target.value})}} value={note?.body}>\n                </textarea>\n        </div>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}